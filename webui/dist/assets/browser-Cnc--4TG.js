import{k as T,l as A,o as S,b as g,d,w as a,c as s,g as e,f as p,h as r,t as y,j as v,e as m}from"./index-DopB6Sc2.js";const B={style:{"margin-bottom":"8px"}},H={style:{"margin-bottom":"8px"}},z={style:{"margin-left":"8px"}},N={style:{"margin-bottom":"8px"}},V={style:{"margin-left":"8px"}},j={style:{"margin-top":"16px"}},D={style:{"margin-bottom":"16px"}},F={style:{"margin-left":"8px"}},K={key:0,style:{"margin-bottom":"16px"}},L={style:{"margin-bottom":"16px"}},M={style:{"margin-bottom":"16px"}},O={key:2,style:{"margin-bottom":"16px"}},W={style:{"margin-left":"8px"}},X={style:{"margin-bottom":"16px"}},q={style:{"margin-bottom":"16px"}},G={style:{display:"flex","justify-content":"flex-end","margin-top":"24px"}},Q={__name:"browser",setup(I){const u=T(),t=A({path:"",headless:!1,fission:!0,proxyEnable:!1,proxyType:"http",proxyHost:"127.0.0.1",proxyPort:7890,proxyAuth:!1,proxyUser:"",proxyPasswd:""});S(async()=>{await u.fetchBrowserConfig();const l=u.browserConfig||{};t.path=l.path||"",t.headless=l.headless||!1,t.fission=l.fission!==!1,l.proxy&&(t.proxyEnable=l.proxy.enable||!1,t.proxyType=l.proxy.type||"http",t.proxyHost=l.proxy.host||"",t.proxyPort=l.proxy.port||7890,t.proxyAuth=l.proxy.auth||!1,t.proxyUser=l.proxy.username||"",t.proxyPasswd=l.proxy.password||"")});const _=async()=>{const l={path:t.path,headless:t.headless,fission:t.fission,proxy:{enable:t.proxyEnable,type:t.proxyType,host:t.proxyHost,port:t.proxyPort,auth:t.proxyAuth,username:t.proxyUser,password:t.proxyPasswd}};await u.saveBrowserConfig(l)};return(l,o)=>{const f=p("a-input"),i=p("a-col"),x=p("a-switch"),b=p("a-row"),c=p("a-segmented"),h=p("a-input-number"),w=p("a-input-password"),k=p("a-collapse-panel"),U=p("a-collapse"),E=p("a-button"),P=p("a-card"),C=p("a-layout");return d(),g(C,{style:{background:"transparent"}},{default:a(()=>[s(P,{title:"浏览器设置",bordered:!1,style:{width:"100%"}},{default:a(()=>[s(b,{gutter:[16,16]},{default:a(()=>[s(i,{xs:24,md:24},{default:a(()=>[e("div",B,[o[10]||(o[10]=e("div",{style:{"font-weight":"600","margin-bottom":"4px"}},"浏览器可执行文件路径",-1)),o[11]||(o[11]=e("div",{style:{"font-size":"12px",color:"#8c8c8c","margin-bottom":"8px"}},[r(" 留空则使用 Camoufox 默认下载路径"),e("br"),r(" Windows示例: C:\\camoufox\\camoufox.exe"),e("br"),r(" Linux示例: /opt/camoufox/camoufox ")],-1)),s(f,{value:t.path,"onUpdate:value":o[0]||(o[0]=n=>t.path=n),placeholder:"留空使用默认路径"},null,8,["value"])])]),_:1}),s(i,{xs:24,md:12},{default:a(()=>[e("div",H,[o[12]||(o[12]=e("div",{style:{"font-weight":"600","margin-bottom":"4px"}},"无头模式",-1)),o[13]||(o[13]=e("div",{style:{"font-size":"12px",color:"#8c8c8c","margin-bottom":"8px"}},[r(" 启用后浏览器无界面化运行"),e("br"),r(" 登录模式和 Xvfb 模式会无视该设置强行禁用无头模式 ")],-1)),s(x,{checked:t.headless,"onUpdate:checked":o[1]||(o[1]=n=>t.headless=n)},null,8,["checked"]),e("span",z,y(t.headless?"已启用":"未启用"),1)])]),_:1}),s(i,{xs:24,md:12},{default:a(()=>[e("div",N,[o[14]||(o[14]=e("div",{style:{"font-weight":"600","margin-bottom":"4px"}},"站点隔离 (fission.autostart)",-1)),o[15]||(o[15]=e("div",{style:{"font-size":"12px",color:"#8c8c8c","margin-bottom":"8px"}},[r(" 关闭可低内存占用，适合低配服务器"),e("br"),r(" 正常 FireFox 用户是默认开启的，请酌情关闭"),e("br"),e("span",{style:{color:"#faad14"}},"⚠️ 反爬检测可能通过检测单进程或者跨进程延迟来识别自动化特征")],-1)),s(x,{checked:t.fission,"onUpdate:checked":o[2]||(o[2]=n=>t.fission=n)},null,8,["checked"]),e("span",V,y(t.fission?"已启用":"已关闭 (省内存)"),1)])]),_:1})]),_:1}),e("div",j,[s(U,null,{default:a(()=>[s(k,{key:"proxy",header:"全局代理设置"},{default:a(()=>[o[22]||(o[22]=e("div",{style:{"font-size":"12px",color:"#8c8c8c","margin-bottom":"16px"}}," 如果实例没有独立配置代理，将使用此全局代理配置 ",-1)),e("div",D,[s(x,{checked:t.proxyEnable,"onUpdate:checked":o[3]||(o[3]=n=>t.proxyEnable=n)},null,8,["checked"]),e("span",F,y(t.proxyEnable?"已启用全局代理":"未启用全局代理"),1)]),t.proxyEnable?(d(),v("div",K,[o[16]||(o[16]=e("div",{style:{"font-weight":"600","margin-bottom":"8px"}},"代理类型",-1)),s(c,{value:t.proxyType,"onUpdate:value":o[4]||(o[4]=n=>t.proxyType=n),block:"",options:[{label:"HTTP",value:"http"},{label:"SOCKS5",value:"socks5"}]},null,8,["value"])])):m("",!0),t.proxyEnable?(d(),g(b,{key:1,gutter:16},{default:a(()=>[s(i,{xs:24,md:12},{default:a(()=>[e("div",L,[o[17]||(o[17]=e("div",{style:{"font-weight":"600","margin-bottom":"8px"}},"代理主机",-1)),s(f,{value:t.proxyHost,"onUpdate:value":o[5]||(o[5]=n=>t.proxyHost=n),placeholder:"例如: 127.0.0.1"},null,8,["value"])])]),_:1}),s(i,{xs:24,md:12},{default:a(()=>[e("div",M,[o[18]||(o[18]=e("div",{style:{"font-weight":"600","margin-bottom":"8px"}},"代理端口",-1)),s(h,{value:t.proxyPort,"onUpdate:value":o[6]||(o[6]=n=>t.proxyPort=n),min:1,max:65535,style:{width:"100%"},placeholder:"例如: 7890"},null,8,["value"])])]),_:1})]),_:1})):m("",!0),t.proxyEnable?(d(),v("div",O,[o[19]||(o[19]=e("div",{style:{"font-weight":"600","margin-bottom":"8px"}},"代理认证",-1)),s(x,{checked:t.proxyAuth,"onUpdate:checked":o[7]||(o[7]=n=>t.proxyAuth=n)},null,8,["checked"]),e("span",W,y(t.proxyAuth?"需要认证":"无需认证"),1)])):m("",!0),t.proxyEnable&&t.proxyAuth?(d(),g(b,{key:3,gutter:16},{default:a(()=>[s(i,{xs:24,md:12},{default:a(()=>[e("div",X,[o[20]||(o[20]=e("div",{style:{"font-weight":"600","margin-bottom":"8px"}},"用户名",-1)),s(f,{value:t.proxyUser,"onUpdate:value":o[8]||(o[8]=n=>t.proxyUser=n),placeholder:"请输入用户名"},null,8,["value"])])]),_:1}),s(i,{xs:24,md:12},{default:a(()=>[e("div",q,[o[21]||(o[21]=e("div",{style:{"font-weight":"600","margin-bottom":"8px"}},"密码",-1)),s(w,{value:t.proxyPasswd,"onUpdate:value":o[9]||(o[9]=n=>t.proxyPasswd=n),placeholder:"请输入密码"},null,8,["value"])])]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1})]),e("div",G,[s(E,{type:"primary",onClick:_},{default:a(()=>[...o[23]||(o[23]=[r(" 保存设置 ",-1)])]),_:1})])]),_:1})]),_:1})}}};export{Q as default};
